<!DOCTYPE html>
<html lang="en" data-theme="light">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>âš¡ï¸ Core Game Visualizer</title>
		<script>
			(function () {
				try {
					var o = localStorage.getItem('ui.theme');
					var m = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
					var t = (o === 'dark' || o === 'light') ? o : (m ? 'dark' : 'light');
					document.documentElement.setAttribute('data-theme', t);
				} catch (_) {}
			})();
		</script>
		<link rel="stylesheet" href="/src/css/styles.css" />
	</head>
	<body>
		<script
			type="module"
			src="/src/ts/renderer/fireworksRenderer.ts"
		></script>
		<script type="module" src="/src/ts/main.ts"></script>

		<button id="open-modal" class="icon-button">
			<img
				id="info-icon"
				src="/assets/ui-svgs/info-button.svg"
				alt="Display Infos"
			/>
		</button>
		<dialog id="site-modal">
			<h2>Modal title</h2>
			<p>Modal content goes here.</p>
			<button id="close-modal">Close</button>
		</dialog>

		<div class="container">
			<div class="top-bar">
				<!-- Fullscreen Toggle Button -->
				<button
					id="fullscreen-toggle-button"
					class="icon-button icon-left"
					title="Toggle Fullscreen"
					aria-label="Toggle Fullscreen"
					aria-pressed="false"
				>
					<img
						id="fullscreen-icon"
						src="/assets/ui-svgs/fullscreen-open.svg"
						alt="Enter Fullscreen"
					/>
				</button>

				<!-- Time controls box -->
				<div id="time-controls" class="control-panel">
					<div class="control-row">
						<button id="prev-tick-button">
							<img
								src="/assets/ui-svgs/tick_previous.svg"
								alt="Previous Tick"
							/>
						</button>
						<div class="slider-group">
							<label for="tick-timeline-slider">Ticks</label>
							<input
								type="range"
								id="tick-timeline-slider"
								min="0"
								max="100"
								value="0"
							/>
						</div>
						<input
							type="number"
							id="tick-timeline-number-input"
							min="0"
							max="100"
							value="0"
						/>
						<button id="next-tick-button">
							<img
								src="/assets/ui-svgs/tick_next.svg"
								alt="Next Tick"
							/>
						</button>
					</div>

					<div class="control-row primary">
						<button id="skip-start-button">
							<img
								src="/assets/ui-svgs/skip_start.svg"
								alt="Jump to Start"
							/>
						</button>
						<button id="play-pause-button">
							<img
								src="/assets/ui-svgs/play.svg"
								alt="Play/Pause"
								id="playPauseIcon"
							/>
						</button>
						<button id="skip-end-button">
							<img
								src="/assets/ui-svgs/skip_end.svg"
								alt="Jump to End"
							/>
						</button>
					</div>

					<div class="control-row">
						<button id="speed-down-button">
							<img
								src="/assets/ui-svgs/speed_down.svg"
								alt="Decrease Playback Speed"
							/>
						</button>
						<div class="slider-group">
							<label for="speed-slider">Ticks/sec</label>
							<input
								type="range"
								id="speed-slider"
								min="0.5"
								max="20"
								step="0.5"
								value="5"
							/>
						</div>
						<input
							type="number"
							id="speed-number-input"
							min="0.5"
							max="20"
							step="0.5"
							value="5"
						/>
						<button id="speed-up-button">
							<img
								src="/assets/ui-svgs/speed_up.svg"
								alt="Increase Playback Speed"
							/>
						</button>
					</div>
				</div>

				<!-- Dark Mode Toggle Button -->
				<button
					id="theme-toggle-button"
					class="icon-button icon-right"
					title="Toggle Theme"
					aria-label="Toggle Theme"
					aria-pressed="false"
				>
					<img
						id="theme-icon"
						src="/assets/ui-svgs/dark-mode-moon.svg"
						alt="Toggle Theme"
					/>
				</button>
			</div>

			<!-- SVG Output Canvas -->
			<div class="game-area">
				<div class="teamName" id="team-one-name">Team One</div>
				<svg id="svg-canvas" xmlns="http://www.w3.org/2000/svg"></svg>
				<div class="teamName" id="team-two-name">Team Two</div>
			</div>
			<div id="tooltip"></div>

			<!-- Win Display -->
			<div id="win-display-box" class="win-display">
				<h1>ğŸ–ï¸ğŸ‰ Winner: <span id="winnername"></span> ğŸˆğŸ</h1>
				<h3 id="winreason"></h3>
			</div>
			<div id="background-darkener" class="win-display"></div>
			<div class="fireworks win-display"></div>

			<!-- Corner Buttons -->

			<a href="https://github.com/42core-team" target="_blank">
				<button id="corner-bottom-left" class="corner-button"></button>
			</a>

			<a href="https://coregame.de/" target="_blank">
				<button id="corner-top-right" class="corner-button"></button>
			</a>
		</div>
	</body>
</html>
